LyoqCiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBp
bnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuCiAqLwppbXBv
cnQgKiBhcyBuZiBmcm9tICdub2RlLWZldGNoJzsKaW1wb3J0ICogYXMgZmQg
ZnJvbSAnZm9ybWRhdGEtbm9kZSc7CmltcG9ydCB7IHR5cGUgRmlsZSwgdHlw
ZSBGaWxlUHJvcGVydHlCYWcgfSBmcm9tICdmb3JtZGF0YS1ub2RlJzsKaW1w
b3J0IEtlZXBBbGl2ZUFnZW50IGZyb20gJ2FnZW50a2VlcGFsaXZlJzsKaW1w
b3J0IHsgQWJvcnRDb250cm9sbGVyIGFzIEFib3J0Q29udHJvbGxlclBvbHlm
aWxsIH0gZnJvbSAnYWJvcnQtY29udHJvbGxlcic7CmltcG9ydCB7IFJlYWRT
dHJlYW0gYXMgRnNSZWFkU3RyZWFtIH0gZnJvbSAnbm9kZTpmcyc7CmltcG9y
dCB7IHR5cGUgQWdlbnQgfSBmcm9tICdub2RlOmh0dHAnOwppbXBvcnQgeyBG
b3JtRGF0YUVuY29kZXIgfSBmcm9tICdmb3JtLWRhdGEtZW5jb2Rlcic7Cmlt
cG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnbm9kZTpzdHJlYW0nOwppbXBvcnQg
eyB0eXBlIFJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vY29yZSc7CmltcG9y
dCB7IE11bHRpcGFydEJvZHkgfSBmcm9tICcuL011bHRpcGFydEJvZHknOwpp
bXBvcnQgeyB0eXBlIFNoaW1zIH0gZnJvbSAnLi9yZWdpc3RyeSc7CgovLyBA
dHMtaWdub3JlICh0aGlzIHBhY2thZ2UgZG9lcyBub3QgaGF2ZSBwcm9wZXIg
ZXhwb3J0IG1hcHMgZm9yIHRoaXMgZXhwb3J0KQppbXBvcnQgeyBSZWFkYWJs
ZVN0cmVhbSB9IGZyb20gJ3dlYi1zdHJlYW1zLXBvbHlmaWxsL2Rpc3QvcG9u
eWZpbGwuZXMyMDE4LmpzJzsKCnR5cGUgRmlsZUZyb21QYXRoT3B0aW9ucyA9
IE9taXQ8RmlsZVByb3BlcnR5QmFnLCAnbGFzdE1vZGlmaWVkJz47CgpsZXQg
ZmlsZUZyb21QYXRoV2FybmVkID0gZmFsc2U7CgovKioKICogQGRlcHJlY2F0
ZWQgdXNlIGZzLmNyZWF0ZVJlYWRTdHJlYW0oJy4vbXkvZmlsZS50eHQnKSBp
bnN0ZWFkCiAqLwphc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgocGF0aDog
c3RyaW5nKTogUHJvbWlzZTxGaWxlPjsKYXN5bmMgZnVuY3Rpb24gZmlsZUZy
b21QYXRoKHBhdGg6IHN0cmluZywgZmlsZW5hbWU/OiBzdHJpbmcpOiBQcm9t
aXNlPEZpbGU+Owphc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgocGF0aDog
c3RyaW5nLCBvcHRpb25zPzogRmlsZUZyb21QYXRoT3B0aW9ucyk6IFByb21p
c2U8RmlsZT47CmFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aChwYXRoOiBz
dHJpbmcsIGZpbGVuYW1lPzogc3RyaW5nLCBvcHRpb25zPzogRmlsZUZyb21Q
YXRoT3B0aW9ucyk6IFByb21pc2U8RmlsZT47CmFzeW5jIGZ1bmN0aW9uIGZp
bGVGcm9tUGF0aChwYXRoOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogUHJv
bWlzZTxGaWxlPiB7CiAgLy8gdGhpcyBpbXBvcnQgZmFpbHMgaW4gZW52aXJv
bm1lbnRzIHRoYXQgZG9uJ3QgaGFuZGxlIGV4cG9ydCBtYXBzIGNvcnJlY3Rs
eSwgbGlrZSBvbGQgdmVyc2lvbnMgb2YgSmVzdAogIGNvbnN0IHsgZmlsZUZy
b21QYXRoOiBfZmlsZUZyb21QYXRoIH0gPSBhd2FpdCBpbXBvcnQoJ2Zvcm1k
YXRhLW5vZGUvZmlsZS1mcm9tLXBhdGgnKTsKCiAgaWYgKCFmaWxlRnJvbVBh
dGhXYXJuZWQpIHsKICAgIGNvbnNvbGUud2FybihgZmlsZUZyb21QYXRoIGlz
IGRlcHJlY2F0ZWQ7IHVzZSBmcy5jcmVhdGVSZWFkU3RyZWFtKCR7SlNPTi5z
dHJpbmdpZnkocGF0aCl9KSBpbnN0ZWFkYCk7CiAgICBmaWxlRnJvbVBhdGhX
YXJuZWQgPSB0cnVlOwogIH0KICAvLyBAdHMtaWdub3JlCiAgcmV0dXJuIGF3
YWl0IF9maWxlRnJvbVBhdGgocGF0aCwgLi4uYXJncyk7Cn0KCmNvbnN0IGRl
ZmF1bHRIdHRwQWdlbnQ6IEFnZW50ID0gbmV3IEtlZXBBbGl2ZUFnZW50KHsg
a2VlcEFsaXZlOiB0cnVlLCB0aW1lb3V0OiA1ICogNjAgKiAxMDAwIH0pOwpj
b25zdCBkZWZhdWx0SHR0cHNBZ2VudDogQWdlbnQgPSBuZXcgS2VlcEFsaXZl
QWdlbnQuSHR0cHNBZ2VudCh7IGtlZXBBbGl2ZTogdHJ1ZSwgdGltZW91dDog
NSAqIDYwICogMTAwMCB9KTsKCmFzeW5jIGZ1bmN0aW9uIGdldE11bHRpcGFy
dFJlcXVlc3RPcHRpb25zPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4o
CiAgZm9ybTogZmQuRm9ybURhdGEsCiAgb3B0czogUmVxdWVzdE9wdGlvbnM8
VD4sCik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VD4+IHsKICBjb25zdCBl
bmNvZGVyID0gbmV3IEZvcm1EYXRhRW5jb2Rlcihmb3JtKTsKICBjb25zdCBy
ZWFkYWJsZSA9IFJlYWRhYmxlLmZyb20oZW5jb2Rlcik7CiAgY29uc3QgYm9k
eSA9IG5ldyBNdWx0aXBhcnRCb2R5KHJlYWRhYmxlKTsKICBjb25zdCBoZWFk
ZXJzID0gewogICAgLi4ub3B0cy5oZWFkZXJzLAogICAgLi4uZW5jb2Rlci5o
ZWFkZXJzLAogICAgJ0NvbnRlbnQtTGVuZ3RoJzogZW5jb2Rlci5jb250ZW50
TGVuZ3RoLAogIH07CgogIHJldHVybiB7IC4uLm9wdHMsIGJvZHk6IGJvZHkg
YXMgYW55LCBoZWFkZXJzIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRSdW50
aW1lKCk6IFNoaW1zIHsKICAvLyBQb2x5ZmlsbCBnbG9iYWwgb2JqZWN0IGlm
IG5lZWRlZC4KICBpZiAodHlwZW9mIEFib3J0Q29udHJvbGxlciA9PT0gJ3Vu
ZGVmaW5lZCcpIHsKICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgKHRoZSB0eXBl
cyBhcmUgc3VidGx5IGRpZmZlcmVudCwgYnV0IGNvbXBhdGlibGUgaW4gcHJh
Y3RpY2UpCiAgICBnbG9iYWxUaGlzLkFib3J0Q29udHJvbGxlciA9IEFib3J0
Q29udHJvbGxlclBvbHlmaWxsOwogIH0KICByZXR1cm4gewogICAga2luZDog
J25vZGUnLAogICAgZmV0Y2g6IG5mLmRlZmF1bHQsCiAgICBSZXF1ZXN0OiBu
Zi5SZXF1ZXN0LAogICAgUmVzcG9uc2U6IG5mLlJlc3BvbnNlLAogICAgSGVh
ZGVyczogbmYuSGVhZGVycywKICAgIEZvcm1EYXRhOiBmZC5Gb3JtRGF0YSwK
ICAgIEJsb2I6IGZkLkJsb2IsCiAgICBGaWxlOiBmZC5GaWxlLAogICAgUmVh
ZGFibGVTdHJlYW0sCiAgICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucywK
ICAgIGdldERlZmF1bHRBZ2VudDogKHVybDogc3RyaW5nKTogQWdlbnQgPT4g
KHVybC5zdGFydHNXaXRoKCdodHRwcycpID8gZGVmYXVsdEh0dHBzQWdlbnQg
OiBkZWZhdWx0SHR0cEFnZW50KSwKICAgIGZpbGVGcm9tUGF0aCwKICAgIGlz
RnNSZWFkU3RyZWFtOiAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEZzUmVhZFN0
cmVhbSA9PiB2YWx1ZSBpbnN0YW5jZW9mIEZzUmVhZFN0cmVhbSwKICB9Owp9
Cg==
