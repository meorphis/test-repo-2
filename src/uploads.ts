aW1wb3J0IHsgdHlwZSBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4vY29yZSc7
CmltcG9ydCB7CiAgRm9ybURhdGEsCiAgRmlsZSwKICB0eXBlIEJsb2IsCiAg
dHlwZSBGaWxlUHJvcGVydHlCYWcsCiAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9w
dGlvbnMsCiAgdHlwZSBGc1JlYWRTdHJlYW0sCiAgaXNGc1JlYWRTdHJlYW0s
Cn0gZnJvbSAnLi9fc2hpbXMvaW5kZXgnOwppbXBvcnQgeyBNdWx0aXBhcnRC
b2R5IH0gZnJvbSAnLi9fc2hpbXMvTXVsdGlwYXJ0Qm9keSc7CmV4cG9ydCB7
IGZpbGVGcm9tUGF0aCB9IGZyb20gJy4vX3NoaW1zL2luZGV4JzsKCnR5cGUg
QmxvYkxpa2VQYXJ0ID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1
ZmZlclZpZXcgfCBCbG9iTGlrZSB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldzsK
ZXhwb3J0IHR5cGUgQmxvYlBhcnQgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8
IEFycmF5QnVmZmVyVmlldyB8IEJsb2IgfCBVaW50OEFycmF5IHwgRGF0YVZp
ZXc7CgovKioKICogVHlwaWNhbGx5LCB0aGlzIGlzIGEgbmF0aXZlICJGaWxl
IiBjbGFzcy4KICoKICogV2UgcHJvdmlkZSB0aGUge0BsaW5rIHRvRmlsZX0g
dXRpbGl0eSB0byBjb252ZXJ0IGEgdmFyaWV0eSBvZiBvYmplY3RzCiAqIGlu
dG8gdGhlIEZpbGUgY2xhc3MuCiAqCiAqIEZvciBjb252ZW5pZW5jZSwgeW91
IGNhbiBhbHNvIHBhc3MgYSBmZXRjaCBSZXNwb25zZSwgb3IgaW4gTm9kZSwK
ICogdGhlIHJlc3VsdCBvZiBmcy5jcmVhdGVSZWFkU3RyZWFtKCkuCiAqLwpl
eHBvcnQgdHlwZSBVcGxvYWRhYmxlID0gRmlsZUxpa2UgfCBSZXNwb25zZUxp
a2UgfCBGc1JlYWRTdHJlYW07CgovKioKICogSW50ZW5kZWQgdG8gbWF0Y2gg
d2ViLkJsb2IsIG5vZGUuQmxvYiwgbm9kZS1mZXRjaC5CbG9iLCBldGMuCiAq
LwpleHBvcnQgaW50ZXJmYWNlIEJsb2JMaWtlIHsKICAvKiogW01ETiBSZWZl
cmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2Vi
L0FQSS9CbG9iL3NpemUpICovCiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyOwog
IC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxs
YS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdHlwZSkgKi8KICByZWFkb25seSB0
eXBlOiBzdHJpbmc7CiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2Rl
dmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90ZXh0KSAq
LwogIHRleHQoKTogUHJvbWlzZTxzdHJpbmc+OwogIC8qKiBbTUROIFJlZmVy
ZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIv
QVBJL0Jsb2Ivc2xpY2UpICovCiAgc2xpY2Uoc3RhcnQ/OiBudW1iZXIsIGVu
ZD86IG51bWJlcik6IEJsb2JMaWtlOwogIC8vIHVuZm9ydHVuYXRlbHkgQHR5
cGVzL25vZGUtZmV0Y2hAXjIuNi40IGRvZXNuJ3QgdHlwZSB0aGUgYXJyYXlC
dWZmZXIgbWV0aG9kCn0KCi8qKgogKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIu
RmlsZSwgbm9kZS5GaWxlLCBub2RlLWZldGNoLkZpbGUsIGV0Yy4KICovCmV4
cG9ydCBpbnRlcmZhY2UgRmlsZUxpa2UgZXh0ZW5kcyBCbG9iTGlrZSB7CiAg
LyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxh
Lm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9sYXN0TW9kaWZpZWQpICovCiAgcmVh
ZG9ubHkgbGFzdE1vZGlmaWVkOiBudW1iZXI7CiAgLyoqIFtNRE4gUmVmZXJl
bmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9B
UEkvRmlsZS9uYW1lKSAqLwogIHJlYWRvbmx5IG5hbWU6IHN0cmluZzsKfQoK
LyoqCiAqIEludGVuZGVkIHRvIG1hdGNoIHdlYi5SZXNwb25zZSwgbm9kZS5S
ZXNwb25zZSwgbm9kZS1mZXRjaC5SZXNwb25zZSwgZXRjLgogKi8KZXhwb3J0
IGludGVyZmFjZSBSZXNwb25zZUxpa2UgewogIHVybDogc3RyaW5nOwogIGJs
b2IoKTogUHJvbWlzZTxCbG9iTGlrZT47Cn0KCmV4cG9ydCBjb25zdCBpc1Jl
c3BvbnNlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgUmVzcG9uc2VM
aWtlID0+CiAgdmFsdWUgIT0gbnVsbCAmJgogIHR5cGVvZiB2YWx1ZSA9PT0g
J29iamVjdCcgJiYKICB0eXBlb2YgdmFsdWUudXJsID09PSAnc3RyaW5nJyAm
JgogIHR5cGVvZiB2YWx1ZS5ibG9iID09PSAnZnVuY3Rpb24nOwoKZXhwb3J0
IGNvbnN0IGlzRmlsZUxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEZp
bGVMaWtlID0+CiAgdmFsdWUgIT0gbnVsbCAmJgogIHR5cGVvZiB2YWx1ZSA9
PT0gJ29iamVjdCcgJiYKICB0eXBlb2YgdmFsdWUubmFtZSA9PT0gJ3N0cmlu
ZycgJiYKICB0eXBlb2YgdmFsdWUubGFzdE1vZGlmaWVkID09PSAnbnVtYmVy
JyAmJgogIGlzQmxvYkxpa2UodmFsdWUpOwoKLyoqCiAqIFRoZSBCbG9iTGlr
ZSB0eXBlIG9taXRzIGFycmF5QnVmZmVyKCkgYmVjYXVzZSBAdHlwZXMvbm9k
ZS1mZXRjaEBeMi42LjQgbGFja3MgaXQ7IGJ1dCB0aGlzIGNoZWNrCiAqIGFk
ZHMgdGhlIGFycmF5QnVmZmVyKCkgbWV0aG9kIHR5cGUgYmVjYXVzZSBpdCBp
cyBhdmFpbGFibGUgYW5kIHVzZWQgYXQgcnVudGltZQogKi8KZXhwb3J0IGNv
bnN0IGlzQmxvYkxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEJsb2JM
aWtlICYgeyBhcnJheUJ1ZmZlcigpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB9
ID0+CiAgdmFsdWUgIT0gbnVsbCAmJgogIHR5cGVvZiB2YWx1ZSA9PT0gJ29i
amVjdCcgJiYKICB0eXBlb2YgdmFsdWUuc2l6ZSA9PT0gJ251bWJlcicgJiYK
ICB0eXBlb2YgdmFsdWUudHlwZSA9PT0gJ3N0cmluZycgJiYKICB0eXBlb2Yg
dmFsdWUudGV4dCA9PT0gJ2Z1bmN0aW9uJyAmJgogIHR5cGVvZiB2YWx1ZS5z
bGljZSA9PT0gJ2Z1bmN0aW9uJyAmJgogIHR5cGVvZiB2YWx1ZS5hcnJheUJ1
ZmZlciA9PT0gJ2Z1bmN0aW9uJzsKCmV4cG9ydCBjb25zdCBpc1VwbG9hZGFi
bGUgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFVwbG9hZGFibGUgPT4gewog
IHJldHVybiBpc0ZpbGVMaWtlKHZhbHVlKSB8fCBpc1Jlc3BvbnNlTGlrZSh2
YWx1ZSkgfHwgaXNGc1JlYWRTdHJlYW0odmFsdWUpOwp9OwoKZXhwb3J0IHR5
cGUgVG9GaWxlSW5wdXQgPSBVcGxvYWRhYmxlIHwgRXhjbHVkZTxCbG9iTGlr
ZVBhcnQsIHN0cmluZz4gfCBBc3luY0l0ZXJhYmxlPEJsb2JMaWtlUGFydD47
CgovKioKICogSGVscGVyIGZvciBjcmVhdGluZyBhIHtAbGluayBGaWxlfSB0
byBwYXNzIHRvIGFuIFNESyB1cGxvYWQgbWV0aG9kIGZyb20gYSB2YXJpZXR5
IG9mIGRpZmZlcmVudCBkYXRhIGZvcm1hdHMKICogQHBhcmFtIHZhbHVlIHRo
ZSByYXcgY29udGVudCBvZiB0aGUgZmlsZS4gIENhbiBiZSBhbiB7QGxpbmsg
VXBsb2FkYWJsZX0sIHtAbGluayBCbG9iTGlrZVBhcnR9LCBvciB7QGxpbmsg
QXN5bmNJdGVyYWJsZX0gb2Yge0BsaW5rIEJsb2JMaWtlUGFydH1zCiAqIEBw
YXJhbSB7c3RyaW5nPX0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZmlsZS4gSWYg
b21pdHRlZCwgdG9GaWxlIHdpbGwgdHJ5IHRvIGRldGVybWluZSBhIGZpbGUg
bmFtZSBmcm9tIGJpdHMgaWYgcG9zc2libGUKICogQHBhcmFtIHtPYmplY3Q9
fSBvcHRpb25zIGFkZGl0aW9uYWwgcHJvcGVydGllcwogKiBAcGFyYW0ge3N0
cmluZz19IG9wdGlvbnMudHlwZSB0aGUgTUlNRSB0eXBlIG9mIHRoZSBjb250
ZW50CiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5sYXN0TW9kaWZpZWQg
dGhlIGxhc3QgbW9kaWZpZWQgdGltZXN0YW1wCiAqIEByZXR1cm5zIGEge0Bs
aW5rIEZpbGV9IHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXMKICovCmV4cG9y
dCBhc3luYyBmdW5jdGlvbiB0b0ZpbGUoCiAgdmFsdWU6IFRvRmlsZUlucHV0
IHwgUHJvbWlzZUxpa2U8VG9GaWxlSW5wdXQ+LAogIG5hbWU/OiBzdHJpbmcg
fCBudWxsIHwgdW5kZWZpbmVkLAogIG9wdGlvbnM6IEZpbGVQcm9wZXJ0eUJh
ZyB8IHVuZGVmaW5lZCA9IHt9LAopOiBQcm9taXNlPEZpbGVMaWtlPiB7CiAg
Ly8gSWYgaXQncyBhIHByb21pc2UsIHJlc29sdmUgaXQuCiAgdmFsdWUgPSBh
d2FpdCB2YWx1ZTsKCiAgaWYgKGlzUmVzcG9uc2VMaWtlKHZhbHVlKSkgewog
ICAgY29uc3QgYmxvYiA9IGF3YWl0IHZhbHVlLmJsb2IoKTsKICAgIG5hbWUg
fHw9IG5ldyBVUkwodmFsdWUudXJsKS5wYXRobmFtZS5zcGxpdCgvW1xcL10v
KS5wb3AoKSA/PyAndW5rbm93bl9maWxlJzsKCiAgICByZXR1cm4gbmV3IEZp
bGUoW2Jsb2IgYXMgYW55XSwgbmFtZSwgb3B0aW9ucyk7CiAgfQoKICBjb25z
dCBiaXRzID0gYXdhaXQgZ2V0Qnl0ZXModmFsdWUpOwoKICBuYW1lIHx8PSBn
ZXROYW1lKHZhbHVlKSA/PyAndW5rbm93bl9maWxlJzsKCiAgaWYgKCFvcHRp
b25zLnR5cGUpIHsKICAgIGNvbnN0IHR5cGUgPSAoYml0c1swXSBhcyBhbnkp
Py50eXBlOwogICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykgewog
ICAgICBvcHRpb25zID0geyAuLi5vcHRpb25zLCB0eXBlIH07CiAgICB9CiAg
fQoKICByZXR1cm4gbmV3IEZpbGUoYml0cywgbmFtZSwgb3B0aW9ucyk7Cn0K
CmFzeW5jIGZ1bmN0aW9uIGdldEJ5dGVzKHZhbHVlOiBUb0ZpbGVJbnB1dCk6
IFByb21pc2U8QXJyYXk8QmxvYlBhcnQ+PiB7CiAgbGV0IHBhcnRzOiBBcnJh
eTxCbG9iUGFydD4gPSBbXTsKICBpZiAoCiAgICB0eXBlb2YgdmFsdWUgPT09
ICdzdHJpbmcnIHx8CiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpIHx8
IC8vIGluY2x1ZGVzIFVpbnQ4QXJyYXksIEJ1ZmZlciwgZXRjLgogICAgdmFs
dWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcgogICkgewogICAgcGFydHMucHVz
aCh2YWx1ZSk7CiAgfSBlbHNlIGlmIChpc0Jsb2JMaWtlKHZhbHVlKSkgewog
ICAgcGFydHMucHVzaChhd2FpdCB2YWx1ZS5hcnJheUJ1ZmZlcigpKTsKICB9
IGVsc2UgaWYgKAogICAgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IodmFsdWUp
IC8vIGluY2x1ZGVzIFJlYWRhYmxlLCBSZWFkYWJsZVN0cmVhbSwgZXRjLgog
ICkgewogICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB2YWx1ZSkgewog
ICAgICBwYXJ0cy5wdXNoKGNodW5rIGFzIEJsb2JQYXJ0KTsgLy8gVE9ETywg
Y29uc2lkZXIgdmFsaWRhdGluZz8KICAgIH0KICB9IGVsc2UgewogICAgdGhy
b3cgbmV3IEVycm9yKAogICAgICBgVW5leHBlY3RlZCBkYXRhIHR5cGU6ICR7
dHlwZW9mIHZhbHVlfTsgY29uc3RydWN0b3I6ICR7CiAgICAgICAgdmFsdWU/
LmNvbnN0cnVjdG9yPy5uYW1lCiAgICAgIH07IHByb3BzOiAke3Byb3BzRm9y
RXJyb3IodmFsdWUpfWAsCiAgICApOwogIH0KCiAgcmV0dXJuIHBhcnRzOwp9
CgpmdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlOiBhbnkpOiBzdHJpbmcg
ewogIGNvbnN0IHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMo
dmFsdWUpOwogIHJldHVybiBgWyR7cHJvcHMubWFwKChwKSA9PiBgIiR7cH0i
YCkuam9pbignLCAnKX1dYDsKfQoKZnVuY3Rpb24gZ2V0TmFtZSh2YWx1ZTog
YW55KTogc3RyaW5nIHwgdW5kZWZpbmVkIHsKICByZXR1cm4gKAogICAgZ2V0
U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLm5hbWUpIHx8CiAgICBnZXRT
dHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUuZmlsZW5hbWUpIHx8CiAgICAv
LyBGb3IgZnMuUmVhZFN0cmVhbQogICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVm
ZmVyKHZhbHVlLnBhdGgpPy5zcGxpdCgvW1xcL10vKS5wb3AoKQogICk7Cn0K
CmNvbnN0IGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlciA9ICh4OiBzdHJpbmcg
fCBCdWZmZXIgfCB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHsK
ICBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnKSByZXR1cm4geDsKICBpZiAo
dHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgeCBpbnN0YW5jZW9m
IEJ1ZmZlcikgcmV0dXJuIFN0cmluZyh4KTsKICByZXR1cm4gdW5kZWZpbmVk
Owp9OwoKY29uc3QgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IgPSAodmFsdWU6
IGFueSk6IHZhbHVlIGlzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjx1bmtub3du
PiA9PgogIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2Jq
ZWN0JyAmJiB0eXBlb2YgdmFsdWVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID09
PSAnZnVuY3Rpb24nOwoKZXhwb3J0IGNvbnN0IGlzTXVsdGlwYXJ0Qm9keSA9
IChib2R5OiBhbnkpOiBib2R5IGlzIE11bHRpcGFydEJvZHkgPT4KICBib2R5
ICYmIHR5cGVvZiBib2R5ID09PSAnb2JqZWN0JyAmJiBib2R5LmJvZHkgJiYg
Ym9keVtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTXVsdGlwYXJ0Qm9keSc7
CgovKioKICogUmV0dXJucyBhIG11bHRpcGFydC9mb3JtLWRhdGEgcmVxdWVz
dCBpZiBhbnkgcGFydCBvZiB0aGUgZ2l2ZW4gcmVxdWVzdCBib2R5IGNvbnRh
aW5zIGEgRmlsZSAvIEJsb2IgdmFsdWUuCiAqIE90aGVyd2lzZSByZXR1cm5z
IHRoZSByZXF1ZXN0IGFzIGlzLgogKi8KZXhwb3J0IGNvbnN0IG1heWJlTXVs
dGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID0gYXN5bmMgPFQgPSBSZWNvcmQ8
c3RyaW5nLCB1bmtub3duPj4oCiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4s
Cik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+
PiA9PiB7CiAgaWYgKCFoYXNVcGxvYWRhYmxlVmFsdWUob3B0cy5ib2R5KSkg
cmV0dXJuIG9wdHM7CgogIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3Jt
KG9wdHMuYm9keSk7CiAgcmV0dXJuIGdldE11bHRpcGFydFJlcXVlc3RPcHRp
b25zKGZvcm0sIG9wdHMpOwp9OwoKZXhwb3J0IGNvbnN0IG11bHRpcGFydEZv
cm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywg
dW5rbm93bj4+KAogIG9wdHM6IFJlcXVlc3RPcHRpb25zPFQ+LAopOiBQcm9t
aXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4gewog
IGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7CiAg
cmV0dXJuIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zKGZvcm0sIG9wdHMp
Owp9OwoKZXhwb3J0IGNvbnN0IGNyZWF0ZUZvcm0gPSBhc3luYyA8VCA9IFJl
Y29yZDxzdHJpbmcsIHVua25vd24+Pihib2R5OiBUIHwgdW5kZWZpbmVkKTog
UHJvbWlzZTxGb3JtRGF0YT4gPT4gewogIGNvbnN0IGZvcm0gPSBuZXcgRm9y
bURhdGEoKTsKICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhi
b2R5IHx8IHt9KS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYWRkRm9ybVZhbHVl
KGZvcm0sIGtleSwgdmFsdWUpKSk7CiAgcmV0dXJuIGZvcm07Cn07Cgpjb25z
dCBoYXNVcGxvYWRhYmxlVmFsdWUgPSAodmFsdWU6IHVua25vd24pOiBib29s
ZWFuID0+IHsKICBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkgcmV0dXJuIHRy
dWU7CiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUu
c29tZShoYXNVcGxvYWRhYmxlVmFsdWUpOwogIGlmICh2YWx1ZSAmJiB0eXBl
b2YgdmFsdWUgPT09ICdvYmplY3QnKSB7CiAgICBmb3IgKGNvbnN0IGsgaW4g
dmFsdWUpIHsKICAgICAgaWYgKGhhc1VwbG9hZGFibGVWYWx1ZSgodmFsdWUg
YXMgYW55KVtrXSkpIHJldHVybiB0cnVlOwogICAgfQogIH0KICByZXR1cm4g
ZmFsc2U7Cn07Cgpjb25zdCBhZGRGb3JtVmFsdWUgPSBhc3luYyAoZm9ybTog
Rm9ybURhdGEsIGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFByb21p
c2U8dm9pZD4gPT4gewogIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1
cm47CiAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBl
RXJyb3IoCiAgICAgIGBSZWNlaXZlZCBudWxsIGZvciAiJHtrZXl9IjsgdG8g
cGFzcyBudWxsIGluIEZvcm1EYXRhLCB5b3UgbXVzdCB1c2UgdGhlIHN0cmlu
ZyAnbnVsbCdgLAogICAgKTsKICB9CgogIC8vIFRPRE86IG1ha2UgbmVzdGVk
IGZvcm1hdHMgY29uZmlndXJhYmxlCiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0g
J3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBl
b2YgdmFsdWUgPT09ICdib29sZWFuJykgewogICAgZm9ybS5hcHBlbmQoa2V5
LCBTdHJpbmcodmFsdWUpKTsKICB9IGVsc2UgaWYgKGlzVXBsb2FkYWJsZSh2
YWx1ZSkpIHsKICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0b0ZpbGUodmFsdWUp
OwogICAgZm9ybS5hcHBlbmQoa2V5LCBmaWxlIGFzIEZpbGUpOwogIH0gZWxz
ZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIGF3YWl0IFByb21p
c2UuYWxsKHZhbHVlLm1hcCgoZW50cnkpID0+IGFkZEZvcm1WYWx1ZShmb3Jt
LCBrZXkgKyAnW10nLCBlbnRyeSkpKTsKICB9IGVsc2UgaWYgKHR5cGVvZiB2
YWx1ZSA9PT0gJ29iamVjdCcpIHsKICAgIGF3YWl0IFByb21pc2UuYWxsKAog
ICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbbmFtZSwgcHJvcF0p
ID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBgJHtrZXl9WyR7bmFtZX1dYCwgcHJv
cCkpLAogICAgKTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJv
cigKICAgICAgYEludmFsaWQgdmFsdWUgZ2l2ZW4gdG8gZm9ybSwgZXhwZWN0
ZWQgYSBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb2JqZWN0LCBBcnJheSwg
RmlsZSBvciBCbG9iIGJ1dCBnb3QgJHt2YWx1ZX0gaW5zdGVhZGAsCiAgICAp
OwogIH0KfTsK
